webpackJsonp([14],{"./pages/SurveyPage/Questions/MultiLineTextQuestion.css":function(e,t){e.exports={"survey-options":"nfkWMn",multiline:"_3lxvY1","multiline-txt":"_17Ulob","error-msg":"_1z58u7","survey-navigate":"_2gzWW3"}},"./pages/SurveyPage/Questions/MultiLineTextQuestion.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return y});var o=n("./node_modules/react/react.js"),i=n.n(o),u=n("./components/Button/Button.js"),l=n("./pages/SurveyPage/Questions/MultiLineTextQuestion.css"),c=n.n(l),p=n("./utils/safeTraverse.ts"),v=n("./components/StringWidget/StringWidget.js"),m=n("./pages/SurveyPage/SurveyConstants.js"),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleTextChange=function(e){var t=n.i(p.a)(e,["target","value"]),r=n.i(p.a)(s.props,["survey","text_constraint"]),a=n.i(p.a)(s.props,["survey","max_text_length"]),o=!1,i=void 0;r===m.b.TEXT&&(o=""!==t.trim()&&(!a||a&&a>t.trim().length),""===t.trim()?i=n.i(v.a)("surveyValidationTxtEmpty"):a&&a<t.trim().length&&(i=n.i(v.a)("surveyValidationTxtMaxLength"))),s.setState({value:t,error:o?null:i})},s.handleSubmit=function(){s.props.onValueChange([s.state.value])},s.state={value:n.i(p.a)(e,["localAnswer",0])||n.i(p.a)(e,["survey","response",0])||"",error:null},s}return s(t,e),f(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.survey,r=e.localAnswer,a=n.i(p.a)(r,[0])||n.i(p.a)(t,["response",0])||"";this.setState({value:a,error:null})}},{key:"render",value:function(){var e=this.state.value&&""!==this.state.value.trim()&&null===this.state.error,t=n.i(p.a)(this.props,["survey","hint"])||"",r=n.i(p.a)(this.props,["survey","next_text"]);return i.a.createElement("div",{className:c.a["survey-options"]},i.a.createElement("div",{className:c.a.multiline},i.a.createElement("textarea",{rows:"6",placeholder:t,className:c.a["multiline-txt"],value:this.state.value,onChange:this.handleTextChange})),this.state.error&&i.a.createElement("div",{className:c.a["error-msg"]},this.state.error),i.a.createElement("div",{className:c.a["survey-navigate"]},i.a.createElement(u.a,{primary:!0,onClick:this.handleSubmit,disabled:!e},r)))}}]),t}(o.Component)},"./pages/SurveyPage/Questions/MultipleChoiceSingleAnswerQuestion.css":function(e,t){e.exports={"survey-options":"_2t10_K","select-group":"_3fEUY9","select-btn":"_10IvLR",selected:"E4ywar"}},"./pages/SurveyPage/Questions/MultipleChoiceSingleAnswerQuestion.js":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return h});var i=n("./node_modules/react/react.js"),u=n.n(i),l=n("./components/Button/Button.js"),c=n("./node_modules/classnames/index.js"),p=n.n(c),v=n("./utils/safeTraverse.ts"),m=n("./pages/SurveyPage/Questions/MultipleChoiceSingleAnswerQuestion.css"),f=n.n(m),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.handleSelect=function(e){return function(){var t=r.props.onValueChange;r.setState({value:e}),r.timeout=setTimeout(function(){t&&t([e])},100)}};var o=n.i(v.a)(e,["localAnswer",0])||n.i(v.a)(e,["survey","response",0]);return r.state={value:o,error:null},r}return o(t,e),y(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.survey,r=e.localAnswer,a=n.i(v.a)(r,[0])||n.i(v.a)(t,["response",0]);this.setState({value:a})}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=n.i(v.a)(this.props,["survey","options"]);return t&&0!==t.length?u.a.createElement("div",{className:f.a["survey-options"]},u.a.createElement("div",{className:f.a["select-group"]},t.map(function(t,n){return u.a.createElement(l.a,{key:n,primary:!0,className:p()(f.a["select-btn"],r({},f.a.selected,e.state.value&&e.state.value===t.id)),onClick:e.handleSelect(t.id)},t.text)}))):null}}]),t}(i.Component)},"./pages/SurveyPage/Questions/TextQuestion.css":function(e,t){e.exports={"survey-options":"_2_mp9n","currency-field":"_3gRJYT","prepend-txt":"_1UOkBR","append-txt":"_38O4xF","survey-navigate":"_3R6RCb"}},"./pages/SurveyPage/Questions/TextQuestion.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var o=n("./node_modules/react/react.js"),i=n.n(o),u=n("./components/Button/Button.js"),l=n("./components/TextInput/TextInput.js"),c=n("./pages/SurveyPage/Questions/TextQuestion.css"),p=n.n(c),v=n("./utils/safeTraverse.ts"),m=n("./components/StringWidget/StringWidget.js"),f=n("./utils/validators.js"),y=n("./pages/SurveyPage/SurveyConstants.js"),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){r(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleTextChange=function(e){var t=n.i(v.a)(s.props,["survey","text_constraint"]),r=!1,a=void 0;t===y.b.CURRENCY&&(r=n.i(f.g)(e),a=n.i(m.a)("surveyCurrencyValidationError")),s.setState({value:e,error:r?null:a})},s.handleSubmit=function(){s.props.onValueChange([s.state.value])},s.state={value:n.i(v.a)(e,["localAnswer",0])||n.i(v.a)(e,["survey","response",0]),error:null},s}return s(t,e),h(t,[{key:"render",value:function(){var e=this.state.value&&""!==this.state.value.trim()&&null===this.state.error,t=this.state.value&&""!==this.state.value.trim(),r=n.i(v.a)(this.props,["survey","text_constraint"]),a=n.i(v.a)(this.props,["survey","next_text"]);return i.a.createElement("div",{className:p.a["survey-options"]},r===y.b.CURRENCY?i.a.createElement("div",{className:p.a["currency-field"]},i.a.createElement(l.a,{onTextChange:this.handleTextChange,autoFocus:"true",placeholder:n.i(m.a)("surveyCurrencyLabel"),prependInfo:t,errorMsg:this.state.error,value:this.state.value},t?i.a.createElement("span",{className:p.a["prepend-txt"]},"â‚¹"):null)):null,i.a.createElement("div",{className:p.a["survey-navigate"]},i.a.createElement(u.a,{primary:!0,onClick:this.handleSubmit,disabled:!e},a)))}}]),t}(o.Component)},"./pages/SurveyPage/Survey.css":function(e,t){e.exports={survey:"_3EtvRk","survey-question":"_20cw99",title:"_1RqNKb","image-box":"_3AdIc9",image:"_1HR_j4","survey-navigate":"_1Y1rXi"}},"./pages/SurveyPage/Survey.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return d});var o=n("./node_modules/react/react.js"),i=n.n(o),u=n("./pages/SurveyPage/Survey.css"),l=n.n(u),c=n("./pages/SurveyPage/SurveyConstants.js"),p=n("./utils/safeTraverse.ts"),v=n("./utils/getImageUrl.js"),m=n("./pages/SurveyPage/Questions/TextQuestion.js"),f=n("./pages/SurveyPage/Questions/MultipleChoiceSingleAnswerQuestion.js"),y=n("./pages/SurveyPage/Questions/MultiLineTextQuestion.js"),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(){var e,s,o,u;r(this,t);for(var h=arguments.length,d=Array(h),g=0;g<h;g++)d[g]=arguments[g];return s=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),o.onValueChange=function(e){var t=n.i(p.a)(o.props,["survey","id"]);o.props.onAnswered(t,e)},o.renderOptions=function(){var e=o.props,t=e.survey,r=e.localAnswer;if(n.i(p.a)(t,["preferred_ui_type"]))switch(t.preferred_ui_type){case c.a.TEXTSINGLELINE:return i.a.createElement(m.a,{onValueChange:o.onValueChange,survey:t,localAnswer:r});case c.a.IMAGEWITHOPTIONS:return i.a.createElement(f.a,{onValueChange:o.onValueChange,survey:t,localAnswer:r});case c.a.TEXTMULTIPLELINES:return i.a.createElement(y.a,{onValueChange:o.onValueChange,survey:t,localAnswer:r});default:return null}return null},o.renderQuestion=function(){var e=n.i(p.a)(o.props,["survey","text"]),t=n.i(p.a)(o.props,["survey","image_url"]);return i.a.createElement("div",{className:l.a["survey-question"]},i.a.createElement("div",{className:l.a.title},e),i.a.createElement("div",{className:l.a["image-box"]},t?i.a.createElement("img",{className:l.a.image,src:n.i(v.a)(t,400)}):null))},u=s,a(o,u)}return s(t,e),h(t,[{key:"render",value:function(){return i.a.createElement("div",{className:l.a.survey},this.renderQuestion(),this.renderOptions())}}]),t}(o.Component)},"./pages/SurveyPage/SurveyConstants.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r={TEXTSINGLELINE:"TEXTSINGLELINE",IMAGEWITHOPTIONS:"IMAGEWITHOPTIONS",TEXTMULTIPLELINES:"TEXTMULTIPLELINES"},a={CURRENCY:"currency",TEXT:"text"}},"./pages/SurveyPage/SurveyPage.css":function(e,t){e.exports={"survey-page":"_34QiuH","survey-page-content":"_3nT66n","survey-confirmation":"_3FK5Zv",loading:"_2QxBWS","btn-carousel":"_2o9Y6d",timer:"TZ5dag","timer-title":"_14VuuQ","timer-time":"_3TTkGy","btn-left":"peA7gi","btn-right":"GKsoNN","chevron-icon":"_2-0Ok4","chevron-icon-right":"_2Un-jA",container:"_1wyScB",title:"_-5Z_Aq",image:"_9T9ytA","close-btn":"_2-XH6-","error-block":"_1nzrx8"}},"./pages/SurveyPage/SurveyPage.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,i,u,l=n("./node_modules/react/react.js"),c=n.n(l),p=n("./node_modules/react-redux/es/index.js"),v=n("./components/Common/Loader/Loader.js"),m=n("./pages/SurveyPage/SurveyPage.css"),f=n.n(m),y=n("./utils/asyncStatusHelper.js"),h=n("./components/Common/Card/index.js"),d=n("./actions/surveyPageActions.js"),g=n("./utils/safeTraverse.ts"),b=n("./components/Button/Button.js"),_=n("./pages/SurveyPage/Survey.js"),S=n("./components/Error/index.js"),E=n("./components/StringWidget/StringWidget.js"),x=n("./utils/getImageUrl.js"),T=n("./components/Title/Title.js"),P=n("./utils/omnitureHelper.js"),j=n("./node_modules/classnames/index.js"),w=n.n(j),N=n("./components/Icons/Icons.js"),C=n("./components/Timer/Timer.js"),O=n("./components/StringWidget/index.js"),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Q=(i=o=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return u.call(n),n.state={isLoading:!1,isEnded:!1,isCompleted:!1,currentItem:null,hasPrev:!1,hasNext:!1},n.answers={},n}return s(t,e),I(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,n=e.userState;this.props.fetchSurveyData(this.getSurveyParams(this.props));var r=Object.assign({},P.a.getBaseOmnitureFields({pageName:"Survey Page",pageType:"Survey Page",location:t,userState:n}),{events:"event1"});P.a.trackOmniturePageView(r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.surveyData;if(n.i(y.h)(t)){if(n.i(g.a)(t,["surveyData","is_survey_complete"]))this.setState({isCompleted:!0,isEnded:!0});else{var r=this.getFirstItem(e);r?this.setState({currentItem:r,hasPrev:this.hasPrev(e,r),hasNext:this.hasNext(e,r)}):this.setState({hasPrev:!0,isCompleted:!0})}}}},{key:"getNodes",value:function(e){return n.i(g.a)(e,["surveyData","surveyData","nodes"])||{}}},{key:"getQuestionsList",value:function(e){return n.i(g.a)(e,["surveyData","surveyData","content","sections",0,"nodes"])||[]}},{key:"getSurveyParams",value:function(e){var t=n.i(g.a)(e,["location","query"]);return{surveyId:t.id,refId:t.ref_id}}},{key:"render",value:function(){var e=this,t=this.props.surveyData;if(n.i(y.g)(t))return c.a.createElement(h.a,{className:f.a["survey-page"]},c.a.createElement("div",{className:f.a["error-block"]},c.a.createElement(S.a,{errorAction:function(){return e.props.router.push("/")},actionButtonText:n.i(E.a)("goToHome")})));var r=n.i(g.a)(this.props,["surveyData"]),a=n.i(g.a)(r,["is_survey_complete"])||this.state.isCompleted,s=n.i(g.a)(r,["surveyData","timed_survey"]);return c.a.createElement("div",{className:f.a["survey-page"]},c.a.createElement(h.a,{className:f.a["survey-page-content"]},c.a.createElement(T.a,{title:n.i(E.a)("surveyPageTitle"),overrideServerTitle:!0}),n.i(y.e)(t)||this.state.isLoading?c.a.createElement(v.a,{className:f.a.loading}):null,n.i(y.h)(t)&&!this.state.isLoading?c.a.createElement("div",{className:f.a.container},s&&!a?this.renderTimer():null,a?this.renderCompleted():this.renderSurvey()):null,this.renderNavigation()))}}]),t}(l.Component),u=function(){var e=this;this.isQuestionAnswered=function(t,r){var a=e.getNodes(t);return null!==(n.i(g.a)(e.answers,[r])||n.i(g.a)(a,[r,"response"]))},this.goToPrev=function(){var t=e.getQuestionsList(e.props),n=t.indexOf(e.state.currentItem),r=e.state.isCompleted?t[t.length-1]:t[n-1];r&&e.setState({isCompleted:!1,currentItem:r,hasPrev:e.hasPrev(e.props,r),hasNext:e.hasNext(e.props,r)})},this.goToNext=function(){var t=e.getQuestionsList(e.props),n=t.indexOf(e.state.currentItem),r=t[n+1];r?e.setState({currentItem:r,hasPrev:e.hasPrev(e.props,r),hasNext:e.hasNext(e.props,r)}):e.setState({isCompleted:!0,hasPrev:!0,hasNext:!1})},this.hasPrev=function(t,n){return e.getQuestionsList(t).indexOf(n)>0},this.hasNext=function(t,n){var r=e.getQuestionsList(t);return r.indexOf(n)<r.length&&e.isQuestionAnswered(t,n)},this.getFirstItem=function(e){var t=n.i(g.a)(e,["surveyData","surveyData"]);return n.i(g.a)(t,["content","sections",0,"nodes"]).find(function(e){return!n.i(g.a)(t,["nodes",e,"response"])})},this.onCompleteSurvey=function(){var t=e.props,r=t.completeSurvey,a=t.surveyData,s=e.getSurveyParams(e.props),o=n.i(g.a)(a,["surveyData","timed_survey"]);!e.state.isEnded&&o?(e.setState({isLoading:!0}),r(s.surveyId,s.refId).then(function(t){var r=n.i(g.a)(t,["data","surveyData","end_confirmation"]);e&&e.setState&&e.setState({isLoading:!1,isEnded:!0,isCompleted:!0,hasPrev:!1,hasNext:!1,confirmationInfo:r})})):e.props.router.push("/")},this.onAnswered=function(t,n){var r=e.props.saveSurvey,a=[{node_id:t,response:n}],s=e.getSurveyParams(e.props);e.answers[t]=n,r(s.surveyId,s.refId,a).then(function(){this&&this.setState&&this.setState({isCompleted:!0})}),e.hasNext(e.props,t)?e.goToNext():e.setState({isCompleted:!0,hasNext:!1})},this.renderCompleted=function(){var t=e.state.confirmationInfo||n.i(g.a)(e.props,["surveyData","surveyData","end_confirmation"]);return t?c.a.createElement("div",{className:f.a["survey-confirmation"]},c.a.createElement("img",{className:f.a.image,src:n.i(x.a)(n.i(g.a)(t,["image_url"]),400)}),c.a.createElement("div",{className:f.a.title},t.confirmation_text),c.a.createElement("div",{className:f.a["close-btn"]},t.confirmation_button_text?c.a.createElement(b.a,{primary:!0,onClick:e.onCompleteSurvey},t.confirmation_button_text):null)):null},this.renderNavigation=function(){return c.a.createElement("div",null,e.state.hasPrev?c.a.createElement("a",{className:w()(f.a["btn-carousel"],f.a["btn-left"]),onClick:e.goToPrev},c.a.createElement(N.a,{pathClassName:f.a["chevron-icon"],width:11,height:18})):null,e.state.hasNext?c.a.createElement("a",{className:w()(f.a["btn-carousel"],f.a["btn-right"]),onClick:e.goToNext},c.a.createElement(N.a,{className:f.a["chevron-icon-right"],pathClassName:f.a["chevron-icon"],width:11,height:18})):null)},this.renderTimer=function(){var t=e.props.surveyData,r=n.i(g.a)(t,["surveyData","survey_end_time"]),a=(new Date).getTime();return!r||r<a?null:c.a.createElement("div",{className:f.a.timer},c.a.createElement("div",{className:f.a["timer-title"]},c.a.createElement(O.a,{strKey:"surveyTimeRemaining"})),c.a.createElement("div",{className:f.a["timer-time"]},c.a.createElement(C.a,{className:f.a["timer-time"],timeRemaining:r-a,onExpiry:e.onCompleteSurvey})))},this.renderSurvey=function(){var t=e.state.currentItem,r=n.i(g.a)(e.props,["surveyData","surveyData","nodes",t]);return r?c.a.createElement(_.a,{survey:r,onAnswered:e.onAnswered,localAnswer:n.i(g.a)(e.answers,[t])}):null}},i),k=function(e){return{surveyData:e.surveyPage,userState:e.userState}},L={fetchSurveyData:d.d,saveSurvey:d.e,completeSurvey:d.f};t.default=n.i(p.connect)(k,L)(Q)}});